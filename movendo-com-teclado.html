<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!--O foco deste treinamento é na lógica de programação, mais do que trabalhar com o canvas em si. 
        A ideia sempre foi fazer com que o aluno aplicasse seu conhecimento para fazer algo um pouco 
        diferente do que calcular IMC ou pontos de vitória de um time. 
        A parte de animação é muito mais complexa do que estamos vendo nesse treinamento, 
        contudo chuto que você ficaria muito feliz se aprendesse a movimentar uma bolinha 
        na tela com o teclado, não?
        Então, esse exercício tem duas partes. 
        A primeira eu lhe ensinarei como capturar as 
        arrow keys, ou seja, aquelas teclas que são setas, 
        geralmente usadas em joguinhos para andar com algo pela tela. 
        Na segunda parte, vem o desafio de lógica que você deve implementar. Preparado?-->
   
        <!--Identificando qual tecla foi pressionada
    Em JavaScript, existe o evento 
    onkeydown, que permite identificar qual tecla está pressionada.
     Esse evento é o único capaz de identificar também as setas do teclado. 
     Contudo, até agora todos os eventos que associamos foi com nossa tela, 
     mas dessa vez quem deve responder ao evento é document. 
     E document, nosso oráculo que sabe tudo o que a página possui, 
     é o cara que fica escutando ao teclado. 
     Então, vou alterar o código e criar a função leDoTeclado e associá-la ao document através do 
     evento onkeydown:-->
     <canvas width="600" height="400"></canvas>

<script>

var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');
    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var x = 20;
    var y = 20;

    // códigos do teclado

    var esquerda = 37;
    var cima = 38;
    var direita = 39;
    var baixo = 40;

    // taxa de incremento
    var taxa = 10;

    function desenhaCirculo(x, y, raio) {

        pincel.fillStyle = 'blue';
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();
    }

    function limpaTela() {

        pincel.clearRect(0, 0, 600, 400);
    }

    function atualizaTela() {

        limpaTela();
        desenhaCirculo(x, y, 10);
    }

    setInterval(atualizaTela, 20);

    function leDoTeclado(evento) {

        // como saber qual tecla foi pressionada?
        //evento.keyCode. O evento.keyCode traz o código da tecla que foi pressionada.
        // Cada tecla possui um KeyCode (código de tecla) respectivo e isso foi catalogado em uma tabela. 
        // Essa tabela deve ser usada pelos navegadores web para que usem os mesmos valores.
        // sabemos que é através de evento.keyCode que temos acesso ao código da tecla pressionada

        //O código que falta é uma sucessão de if's para identificar qual tecla foi pressionada, 
        //incrementando ora x, ora y, positivamente ou negativamente. 
        //Nessa implementação podemos andar com a bolinha até que suma da tela:
        if(evento.keyCode == cima) {

            y = y - taxa;

            } else if (evento.keyCode == baixo) {

            y = y + taxa;

            } else if (evento.keyCode == esquerda) {

            x = x - taxa;

            } else if (evento.keyCode == direita) {

            x = x + taxa;
            }
    }

   document.onkeydown = leDoTeclado;

</script>

</body>
</html>